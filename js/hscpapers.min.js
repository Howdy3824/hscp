var jsonData,courseIndex,yearIndex,docLink;$(document).ready(function(){$('#more-dropdown').dropdown({action:'nothing'});$.getJSON('https://raw.githubusercontent.com/notseenee/nesappscraper/master/data.json',function(data){jsonData=data;populateDropdown(jsonData,'course_name','#course-menu',!1);$('#course-dropdown').removeClass('loading').dropdown('show').dropdown({selectOnKeydown:!1})});$.getJSON('https://raw.githubusercontent.com/notseenee/nesappscraper/master/meta.json',function(data){console.log(data.timestamp);$('#timestamp').html(data.timestamp.replace('T',' ').substring(0,19))});$('.popup').popup();$('#about-modal').modal({duration:200})});function populateDropdown(searchIn,searchFor,pushTo,reverse){var items=[];for(i=0;i<searchIn.length;i++){items.push(searchIn[i][searchFor])}
items.sort();if(reverse)items.reverse();$(pushTo).empty();for(j=0;j<items.length;j++){$(pushTo).append('<div class="item" data-value"1">'+items[j]+'</div>')}}
$('#course-input').change(function(){$('#year-dropdown').addClass('loading').removeClass('disabled');for(k=0;k<jsonData.length;k++){if(jsonData[k].course_name.toLowerCase()==$('#course-input')[0].value){courseIndex=k;break}}
populateDropdown(jsonData[courseIndex].packs,'year','#year-menu',!0);$('#year-dropdown').removeClass('loading').dropdown('restore defaults').dropdown('show').dropdown({selectOnKeydown:!1})});$('#year-input').change(function(){if($(this)[0].value=='')return;$('#doc-dropdown').addClass('loading').removeClass('disabled');for(l=0;l<jsonData[courseIndex].packs.length;l++){if(jsonData[courseIndex].packs[l].year==$('#year-input')[0].value){yearIndex=l;break}}
populateDropdown(jsonData[courseIndex].packs[yearIndex].docs,'doc_name','#doc-menu',!1);$('#doc-dropdown').removeClass('loading').dropdown('restore defaults').dropdown('show');$('.button-exampack').removeClass('disabled').attr('href',jsonData[courseIndex].packs[yearIndex].link)});$('#doc-input').change(function(){if($(this)[0].value=='')return;for(m=0;m<jsonData[courseIndex].packs[yearIndex].docs.length;m++){if(jsonData[courseIndex].packs[yearIndex].docs[m].doc_name.toLowerCase()==$('#doc-input')[0].value){docLink=jsonData[courseIndex].packs[yearIndex].docs[m].doc_link;docLink=docLink.replace('http','https');break}}
$('#iframe').attr('src',docLink);$('#iframe-loader').addClass('active');$('.button-download').removeClass('disabled').attr('href',docLink);$('.button-link').removeClass('disabled').removeAttr('disabled');document.title=$('#year-dropdown .text').html()+' '+$('#doc-dropdown .text').html()+' - '+$('#course-dropdown .text').html()});$('#logo').click(function(){location.reload()});$('.button-link').click(function(){prompt('Copy link below:',docLink)});$('.button-about').click(function(){$('#about-modal').modal('show')});$('#iframe').on('load',function(){$('#iframe-loader').removeClass('active')})
